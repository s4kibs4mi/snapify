version: '3.1'

services:
  #  snapify:
  #    image: s4kibs4mi/snapify:1.0.7
  #    command: [ "serve", "--config_path", "/root/", "--config_name", "config" ]
  #    restart: on-failure
  #    ports:
  #      - 9010:9010
  #    volumes:
  #      - "./config.yml:/root/config.yml"
  #    depends_on:
  #      - database
  #      - rabbitmq
  #      - minio
  #      - chrome-headless
  #    links:
  #      - chrome-headless
  #    networks:
  #      snapify_net:
  #        ipv4_address: 172.28.1.1

  rod-headless-browser:
    image: ghcr.io/go-rod/rod:v0.112.5
    ports:
      - "7317:7317"

  database:
    image: postgres:12
    ports:
      - "5432:5432"
    environment:
      POSTGRES_DB: test
      POSTGRES_PASSWORD: test
      POSTGRES_USER: root

  minio:
    image: minio/minio
    ports:
      - "9000:9000"
    environment:
      MINIO_ACCESS_KEY: "MINIO_ACCESS_KEY"
      MINIO_SECRET_KEY: "MINIO_SECRET_KEY"
    command: [ "server", "/data" ]

  redis:
    image: redis:7.0.7
    ports:
      - "6379:6379"
    entrypoint: [ "redis-server", "--appendonly", "yes",  "--requirepass", "test" ]
